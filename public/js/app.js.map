{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["'use strict';\n\n(function() {\n\n    angular\n        .module('app', []);\n\n})();\n\n(function() {\n\n    angular\n        .module('app')\n        .service('launcherService', launcherService);\n\n    launcherService.$inject = ['$http', '$window'];\n\n    function launcherService($http, $window) {\n\n        var urls = $window.launcher.urls;\n\n        this.launchAmi = function(credentials, successCallback, errorCallback) {\n            $http.post(urls.launchAmi, {credentials})\n                .then(\n                    function(response) {\n                        successCallback(response.data);\n                        return;\n                    },\n                    function(response) {\n                        errorCallback(response.data);\n                    });\n        }\n\n        this.getInstance = function(credentials, instance, successCallback, errorCallback) {\n            var params = {credentials : credentials,\n                          instanceId  : instance.instanceId};\n            \n            $http.get(urls.instance, {params})\n                .then(\n                    function(response) {\n                        successCallback(response.data);\n                        return;\n                    },\n                    function(response) {\n                        errorCallback(response.data);\n                    });\n        }\n\n        this.getInstanceStatus = function(credentials, instance, successCallback, errorCallback) {\n            var params = {credentials : credentials,\n                          instanceId  : instance.instanceId};\n            \n            $http.get(urls.instanceStatus, {params})\n                .then(\n                    function(response) {\n                        successCallback(response.data);\n                        return;\n                    },\n                    function(response) {\n                        errorCallback(response.data);\n                    });\n        }\n\n    }\n\n})();\n\n(function() {\n\n    angular\n        .module('app')\n        .controller('LauncherController', LauncherController);\n\n    LauncherController.$inject = ['$scope', '$timeout', 'launcherService'];\n\n    function LauncherController($scope, $timeout, launcherService) {\n        var vm = this;\n\n        vm.credentials = {};\n\n        vm.errors = {};\n        vm.thereAreErrors = false;\n\n        vm.launchAmi = function(launchForm) {         \n            vm.hideErrors();\n            launcherService.launchAmi(vm.credentials,\n                function(ec2Instance) {\n                    vm.ec2Instance = ec2Instance;\n                    keepUpdatingUntilReady();\n                },\n                function(errors) {\n                    console.log(errors);\n                    if (errors.hasOwnProperty('accessKey')) {\n                        launchForm.$setValidity(\"accessKey\", false);    \n                    }\n                    if (errors.hasOwnProperty('secretKey')) {\n                        launchForm.$setValidity(\"secretKey\", false);\n                    }\n                    showErrors(errors);\n                }\n            );\n        }\n\n        vm.hideErrors = function() {\n            vm.errors = {};\n            vm.thereAreErrors = false;\n        }\n\n        function showErrors(errors) {\n            vm.errors = errors;\n            vm.thereAreErrors = true;\n        }\n\n        function keepUpdatingUntilReady() {\n            if (vm.ec2Instance.status.name === 'pending') {\n                $timeout(updateInstance, 3000)\n            } else if ((vm.ec2Instance.status.instanceStatus === undefined) || (vm.ec2Instance.status.instanceStatus === 'initializing') || \n            (vm.ec2Instance.status.instanceStatus === 'initializing')) {\n                $timeout(updateInstanceStatus, 3000)\n            }\n        }\n\n        function updateInstance() {\n            launcherService.getInstance(vm.credentials, vm.ec2Instance,\n                function(ec2Instance) {\n                    vm.ec2Instance = ec2Instance;\n                    keepUpdatingUntilReady();\n                },\n                function(errors) {\n                    showErrors(errors);\n                });\n        }\n\n        function updateInstanceStatus() {\n            launcherService.getInstanceStatus(vm.credentials, vm.ec2Instance,\n                function(ec2InstanceStatus) {\n                    vm.ec2Instance.status = ec2InstanceStatus;\n                    keepUpdatingUntilReady();\n                },\n                function(errors) {\n                    showErrors(errors);\n                });\n        }\n\n    }\n\n})();\n"],"sourceRoot":"/source/"}